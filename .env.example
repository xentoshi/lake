# =============================================================================
# Lake Development Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values.
# Run ./scripts/dev-setup.sh to set up the local development environment.

# -----------------------------------------------------------------------------
# GeoIP Databases (required for indexer)
# -----------------------------------------------------------------------------
# MaxMind GeoLite2 databases for IP geolocation.
# Run ./scripts/dev-setup.sh to download these automatically.
GEOIP_CITY_DB_PATH=.tmp/geoip/GeoLite2-City.mmdb
GEOIP_ASN_DB_PATH=.tmp/geoip/GeoLite2-ASN.mmdb

# -----------------------------------------------------------------------------
# InfluxDB (optional, for indexer metrics source)
# -----------------------------------------------------------------------------
# Only needed if ingesting telemetry data from InfluxDB.
INFLUX_URL=
INFLUX_TOKEN=
INFLUX_BUCKET=

# -----------------------------------------------------------------------------
# ClickHouse (required)
# -----------------------------------------------------------------------------
# Primary data store for analytics. Started by docker compose.
# Default port 9100 is mapped from container's 9000 to avoid conflicts.
CLICKHOUSE_ADDR_TCP=localhost:9100
CLICKHOUSE_DATABASE=default
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=
# Multi-environment: set these to enable devnet/testnet env switching in the UI.
# Each points to a separate ClickHouse database on the same server.
# CLICKHOUSE_DATABASE_DEVNET=dz_devnet
# CLICKHOUSE_DATABASE_TESTNET=dz_testnet

# -----------------------------------------------------------------------------
# PostgreSQL (required)
# -----------------------------------------------------------------------------
# Stores user sessions, auth state, and workflow persistence.
# Started by docker compose.
POSTGRES_RUN_MIGRATIONS=true
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=lakedev
POSTGRES_USER=lakedev
POSTGRES_PASSWORD=lakedev

# -----------------------------------------------------------------------------
# Neo4j (optional, for topology graph queries)
# -----------------------------------------------------------------------------
# Graph database for network topology analysis.
# Started by docker compose, but not required for basic functionality.
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password
NEO4J_DATABASE=neo4j

# -----------------------------------------------------------------------------
# Web Base URL (required for Slack integration)
# -----------------------------------------------------------------------------
# Public URL of the web frontend. Used for Slack session links and OAuth
# callback redirects. In dev, set to the Vite dev server URL.
WEB_BASE_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Slack Bot (optional)
# -----------------------------------------------------------------------------
# Two modes:
#
# 1. Single-tenant: set SLACK_BOT_TOKEN for one workspace.
#    - Add SLACK_APP_TOKEN to use socket mode (dev).
#    - Or add SLACK_SIGNING_SECRET to use HTTP mode (prod).
#
# 2. Multi-tenant: set SLACK_CLIENT_ID, SLACK_CLIENT_SECRET, and
#    SLACK_SIGNING_SECRET. Users install via OAuth from the settings page.
#    Do NOT set SLACK_BOT_TOKEN in this mode.
#
SLACK_BOT_TOKEN=xoxb-
SLACK_APP_TOKEN=xapp-
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=
SLACK_SIGNING_SECRET=
# Override the OAuth callback URI (required behind a tunnel/proxy):
SLACK_REDIRECT_URL=https://yourapp.yourdomain.com/api/slack/oauth/callback
# Restrict which Slack workspaces can install the app (comma-separated team IDs).
# If unset, any workspace can install.
SLACK_ALLOWED_TEAM_IDS=

# -----------------------------------------------------------------------------
# Anthropic (required for AI agent)
# -----------------------------------------------------------------------------
# Powers the natural language SQL generation agent.
# Get an API key at https://console.anthropic.com/
ANTHROPIC_API_KEY=

# -----------------------------------------------------------------------------
# Solana (optional, for validator data)
# -----------------------------------------------------------------------------
# RPC endpoint for fetching Solana validator information.
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# -----------------------------------------------------------------------------
# Usage Quotas (production only)
# -----------------------------------------------------------------------------
# Rate limiting based on wallet SOL balance.
MIN_SOL_THRESHOLD=1.0
WALLET_PREMIUM_LIMIT=25

# -----------------------------------------------------------------------------
# Authentication (required for production)
# -----------------------------------------------------------------------------
# Google OAuth client ID for user authentication.
# AUTH_ALLOWED_DOMAINS restricts sign-in to specific email domains.
# AUTH_ALLOWED_EMAILS allows specific individual emails regardless of domain.
GOOGLE_CLIENT_ID=472508936752-rl4gvm1a7k0eihcmsgq4aqoqr828js8n.apps.googleusercontent.com
AUTH_ALLOWED_DOMAINS=doublezero.xyz,doublezero.us,malbeclabs.com
AUTH_ALLOWED_EMAILS=

# -----------------------------------------------------------------------------
# Sentry (optional, for error tracking)
# -----------------------------------------------------------------------------
# Error tracking and performance monitoring.
# Create separate projects for API and Web at https://sentry.io
SENTRY_DSN=
SENTRY_DSN_WEB=
SENTRY_ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Static Assets (production only)
# -----------------------------------------------------------------------------
# S3 bucket for serving old static assets during rolling deployments.
# Prevents 404s when users have cached HTML referencing old JS/CSS bundles.
#
# WEB_DIST_DIR - Local path to web assets (default: /lake/web/dist)
# ASSET_BUCKET_URL - Public URL to fetch missing assets from S3
# ASSET_BUCKET - Bucket name for upload script
#
# WEB_DIST_DIR=/lake/web/dist
ASSET_BUCKET_URL=https://malbeclabs-lake-app-web-assets.s3.amazonaws.com/assets
ASSET_BUCKET=malbeclabs-lake-app-web-assets
